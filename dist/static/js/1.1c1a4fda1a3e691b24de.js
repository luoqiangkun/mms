webpackJsonp([1],{"2Bpz":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAB8ElEQVR4Xt3bwU3DQBCF4V3LN+eQEswtii9QQjpJOoAOoALoINBBOoASclg7ueEOACm5RWtkFCRAJCizuzNv8Nkj7/9pbyNbo+wpy3JYFMWttXZqjFlsNptZ27av1AxLHZSY28c/WmvPv3z/xjl3TT2PGoAD8abruoe6rvvbQHpUAByK74u99xdN0yxJ9cYYeIA/4mdN09xT4/s5aIDU8dAAHPGwAFzxkACc8XAA3PFQABLxMABS8RAAkvHiANLxogAI8WIAKPEiAEjx7ABo8awAiPFsAKjxLADI8ckB0OOTAmiITwagJT4JgKb46ADa4qMCaIyPBqA1PgqA5vhgAO3xwQBVVc33W9pvyxnvffDGJmTbc8oseTM0Go3KPM+ff36s67qruq7vTjmE5LtkgP76DwaDl18AltvtdhKys+cEIQP0hxyPx9Msy+aaEYIA/gNCMIB2hCgAmhGiAWhFiAqgESE6gDaEJACaEJIBaEFICqABITkAOgILADICGwAqAisAIgI7ABqCCAASghgACoIoAAKCOIA0AgSAJAIMgBQCFIAEAhwANwIkACcCLAAXAjQABwI8QGoEFQDHEIwxT865CXWfqAbgGMJutztbr9ctBUEVwAGEN+fckBLfz6gD+ESw1n78Me69v1ytVgsqwDsu+Whfhm+MwgAAAABJRU5ErkJggg=="},"5LIk":function(t,e){},"BI+J":function(t,e){},Kvfe:function(t,e){},RBJf:function(t,e){t.exports="data:image/png;base64,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"},YAu0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("mvHQ"),s=i.n(a),o=(i("OgVB"),i("/Lyv")),n=i.n(o),m=(i("34+y"),i("X+yh")),c=i.n(m),l=i("//Fk"),r=i.n(l),d=i("bOdI"),u=i.n(d),p=i("mw3O"),_=i.n(p),h=i("FWuv"),v=i.n(h),g=(i("E84t"),{name:"list",components:{},data:function(){return{maxHeight:"",maxWidth:""}},props:{lists:{type:Object,default:function(){return{page:1,records:0,total:0,more:!0,items:[],loaded:!1}}}},methods:{doLike:function(t,e){var i=this,a=_.a.stringify({moments_id:t});this.$http.post(SYS.URL.moments.like_add,a).then(function(t){var a=t.data;200===a.status&&(i.lists.items[e].is_like=a.data.like_id,i.lists.items[e].moments_like_count++)})},rmLike:function(t,e){var i=this,a=_.a.stringify({like_id:t});this.$http.post(SYS.URL.moments.like_remove,a).then(function(t){200===t.data.status&&(i.lists.items[e].is_like=0,i.lists.items[e].moments_like_count--)})},fixItems:function(t){var e=this;return t.forEach(function(i,a){var s=e.maxWidth,o=i.image_heigth/i.image_width*e.maxWidth;o=Math.min(o,e.maxHeight),t[a].image_width=s,t[a].image_heigth=o,t[a].shown=!1,t[a].animate=!1}),t},masonry:function(){var t=this;return new r.a(function(e,i){document.querySelector("#waterfull")&&(new v.a("#waterfull",{itemSelector:".moments-item",transitionDuration:0,resize:!1}),t.lists.items.forEach(function(e,i){t.lists.items[i].shown=!0,t.lists.items[i].animate=!0})),e(t)})},jumpVideoPlay:function(t){if(isApp){if("android"===isApp&&android.jumpVideoPlay(t,this.getKind()),"ios"===isApp){var e={moments_id:t,kind:this.getKind()},i=s()(e);window.webkit.messageHandlers.jumpVideoPlay.postMessage(i)}}else this.$router.push({path:"/detail/"+t})}},created:function(){this.maxWidth=document.documentElement.clientWidth/2,this.maxHeight=Math.ceil(1.33*this.maxWidth)},mounted:function(){},watch:{lists:{handler:function(t,e){var i=this;this.$nextTick(function(){return i.masonry()})},deep:!0}}}),f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"moments-scroll"},[t.lists.items.length>0?i("div",{staticClass:"moments-list effect-1",attrs:{id:"waterfull"}},[t._l(t.lists.items,function(e,a){return i("div",{staticClass:"moments-item",class:{shown:e.shown,animate:e.animate},attrs:{index:e.index}},[i("div",{staticClass:"moments-wrap"},[i("div",{staticClass:"moments-media",style:{height:e.image_heigth+"px",maxHeight:t.maxHeight+"px"}},[1==e.moments_type?i("router-link",{attrs:{to:"/detail/"+e.moments_id}},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.moments_image[0],expression:"item.moments_image[0]"}],staticStyle:{width:"100%",display:"block"}})]):4==e.moments_type?[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.moments_image[0],expression:"item.moments_image[0]"}],staticStyle:{width:"100%",display:"block"},on:{click:function(i){return t.jumpVideoPlay(e.moments_id)}}}),t._v(" "),i("i",{staticClass:"icon icon-video"})]:t._e()],2),t._v(" "),i("div",{staticClass:"moments-content"},[1==e.moments_type?i("router-link",{attrs:{to:"/detail/"+e.moments_id}},[i("p",{domProps:{innerHTML:t._s(e.moments_title.toString())}})]):i("p",{domProps:{innerHTML:t._s(e.moments_title.toString())},on:{click:function(i){return t.jumpVideoPlay(e.moments_id)}}})],1),t._v(" "),i("div",{staticClass:"moments-info"},[i("router-link",{staticStyle:{display:"block"},attrs:{to:t.uid==e.user_id?"/home":"/user/"+e.user_id}},[i("div",{staticClass:"moments-uper"},[i("div",{staticClass:"uper-avatar"},[i("img",{staticStyle:{display:"block"},attrs:{alt:e.user_avatar,src:e.user_avatar}})]),t._v(" "),i("div",{staticClass:"uper-nickname"},[t._v("\n                                  "+t._s(e.user_nickname)+"\n                              ")])])]),t._v(" "),i("div",{staticClass:"moments-collect"},[e.is_like?i("i",{staticClass:"icon icon-liked",on:{click:function(i){return t.rmLike(e.is_like,a)}}}):i("i",{staticClass:"icon icon-like",on:{click:function(i){return t.doLike(e.moments_id,a)}}}),t._v(" "),i("span",[t._v(t._s(e.moments_like_count))])])],1)])])})],2):t._e()])},staticRenderFns:[]};var A=i("VU/8")(g,f,!1,function(t){i("Kvfe")},null,null).exports,C=(i("7+uW"),{name:"complaint",components:{},data:function(){return{complaint_reason_id:"",type:"default",modal:!0,popupVisible:!1,loaded:!1,options:[]}},props:{comment_id:Number},methods:{init:function(){this.popupVisible=!0,this.loaded||this.loadData()},loadData:function(){var t=this;return new r.a(function(e,i){t.$http.get(SYS.URL.moments.complaint_reason).then(function(i){var a=i.data;if(200===a.status)for(var s in a.data.items)t.options.push({label:a.data.items[s].complaint_reason_name,value:a.data.items[s].complaint_reason_id.toString()});t.loaded=!0,e(i)})})},submit:function(){var t=this;return new r.a(function(e,i){t.complaint_reason_id&&t.$axios.post(SYS.URL.moments.complaint_add,{complaint_reason_id:t.complaint_reason_id,comment_id:t.comment_id},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){e.data;200==e.data.status&&(c()("提交成功"),t.popupVisible=!1)})})},goBack:function(){this.$emit("back")}},mounted:function(){},created:function(){}}),k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("mt-popup",{staticClass:"mint-popup-3",attrs:{position:"right",modal:"modal"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[i("div",{staticClass:"complaint"},[t._t("header",[i("div",{staticClass:"header"},[i("div",{staticClass:"left"},[i("div",{on:{click:function(e){t.popupVisible=!t.popupVisible}}},[i("i",{staticClass:"icon icon-back"})])]),t._v(" "),i("div",{staticClass:"mid"},[i("h3",[t._v("举报评论")])])])]),t._v(" "),i("div",{staticClass:"complaint-form"},[i("div",{staticClass:"form-content"},[i("mt-radio",{attrs:{align:"right",title:"请选择举报原因",options:t.options},model:{value:t.complaint_reason_id,callback:function(e){t.complaint_reason_id=e},expression:"complaint_reason_id"}}),t._v(" "),i("div",{staticClass:"submit-btn",on:{click:t.submit}},[i("mt-button",{style:t.complaint_reason_id?"background:#ef4f4f;color:#ffffff":"background:#ccc;color:#ffffff",attrs:{size:"large",type:t.type}},[t._v("提交")])],1)],1)])],2)])},staticRenderFns:[]};var w=i("VU/8")(C,k,!1,function(t){i("BI+J")},"data-v-7fa83c72",null).exports,y=(i("iqGf"),i("5LIk"),i("Eg0l")),D=i("r+/8"),E={components:{list:A,complaint:w,share:y.a},data:function(){return{id:this.$route.params.id,comment_id:0,comment_index:0,comment_parent_id:0,inputType:"comment",loadPageVisible:!0,loadBotVisible:!1,moreVisible:!0,sheetVisible:!1,loadReplyVisible:!1,input_content:"",isShow:1,imgDetailData:[],isTrue:1,swiperOption:{pagination:{el:".swiper-pagination"}},comments:{page:1,records:0,total:0,more:!0,items:[]},lists:{page:1,records:0,total:0,more:!0,items:[]},actions:[{name:"回复",method:this.hideEdit},{name:"举报",method:this.complaint}],cancelText:"取消",playerVisible:!0,playerOptions:{autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",sources:[{type:"video/mp4",src:""}],poster:"",width:document.documentElement.clientWidth,notSupportedMessage:"此视频暂无法播放，请稍后再试"},shareData:{}}},created:function(){var t=this;this.maxWidth=document.documentElement.clientWidth/2,this.maxHeight=Math.ceil(1.33*this.maxWidth),this.id=this.$route.params.id,this.getImgDetail().then(function(){return t.loadPageVisible=!1,t.$nextTick(function(){var e;if(0!=t.imgDetailData.moments_product_count){var i=document.querySelector(".product-wrapper"),a=i.querySelector(".product-content"),s=i.querySelectorAll(".product-item");if(0==s.length)return!0;var o=s[0].offsetWidth*s.length;a.style.width=o+20+"px";new D.a(i,(e={scrollX:0,click:!0},u()(e,"scrollX",!0),u()(e,"scrollY",!1),u()(e,"eventPassthrough","vertical"),e))}}),t.loadRecommend()}),this.getCommentData()},mounted:function(){},computed:{player:function(){return this.$refs.videoPlayer.player}},methods:{onPlayerPlay:function(t){},onPlayerPause:function(t){},play:function(){this.$refs.videoPlayer.player.play(),document.querySelector(".video-player-icon").style.opacity=0},goback:function(){this.$router.go(-1)},getImgDetail:function(){var t=this;return console.log(this.$route.params),new r.a(function(e,i){t.$axios.get(SYS.URL.moments.detail+"&moments_id="+t.id).then(function(i){t.imgDetailData=i.data.data,t.shareData={title:i.data.data.moments_title,desc:i.data.data.moments_content,link:window.location.href,type:"link",imgUrl:i.data.data.moments_image[0],dataUrl:window.location.href},e(i)})})},showInput:function(t){this.inputType="comment",this.comment_id=0,this.hideEdit()},hideEdit:function(){var t=this;this.isTrue=0,this.$nextTick(function(){t.$refs.fabiao1.focus()})},addComment:function(){var t=this;0!=this.input_content.trim().length&&(this.$axios.post(SYS.URL.moments.comment_add,{moments_id:this.id,comment_content:this.input_content,comment_parent_id:this.comment_id},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){var i=e.data;200==e.data.status?"reply"===t.inputType?t.comments.items[t.comment_index].moments_comment_reply.items.push(i.data):(t.comments.items.unshift(i.data),c()("发表成功")):c()(e.data.msg),t.input_content=""}),this.isTrue=1)},rmComment:function(){var t=this;n.a.confirm("确定删除评论吗?").then(function(e){var i=void 0;i="reply"===t.rmType?t.reply_id:t.comment_id,t.$axios.post(SYS.URL.moments.comment_remove,{comment_id:i},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){e.data;if(200==e.data.status)if("reply"===t.rmType)for(var i in t.comments.items[t.comment_index].moments_comment_reply.items)t.comments.items[t.comment_index].moments_comment_reply.items[i].comment_id==e.data.data.comment_id&&t.comments.items[t.comment_index].moments_comment_reply.items.splice(i,1);else for(var a in t.comments.items)t.comments.items[a].comment_id==e.data.data.comment_id&&t.comments.items.splice(a,1)})})},rmLike:function(t){var e=this;this.$axios.post(SYS.URL.moments.like_remove,{like_id:t},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log(t),200==t.data.status&&(e.imgDetailData.is_like=0,e.imgDetailData.moments_like_count--,console.log("移除"))})},doLike:function(t){var e=this;this.$axios.post(SYS.URL.moments.like_add,{moments_id:t},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200==t.data.status&&(e.imgDetailData.is_like=t.data.data.like_id,e.imgDetailData.moments_like_count++)})},rmCollect:function(t){var e=this;this.$axios.post(SYS.URL.moments.collection_remove,{collection_id:t},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200==t.data.status&&(console.log("rmCollect"),e.imgDetailData.is_collect=0,e.imgDetailData.moments_collection_count--)})},doCollect:function(t){var e=this;this.$axios.post(SYS.URL.moments.collection_add,{moments_id:t},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log("ok"),200==t.data.status&&(e.imgDetailData.is_collect=t.data.data.collection_id,e.imgDetailData.moments_collection_count++)})},rmFollow:function(t){var e=this;this.$axios.post(SYS.URL.moments.follow_remove,{follow_id:t},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log(t),200==t.data.status&&(e.imgDetailData.is_follow=0)})},addFollow:function(t){var e=this;this.$axios.post(SYS.URL.moments.follow_add,{up_user_id:t},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200==t.data.status&&(e.imgDetailData.is_follow=t.data.data.follow_id)})},rmCommentLike:function(t,e){var i=this;this.$axios.post(SYS.URL.moments.comment_like_remove,{like_id:t},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(200==t.data.status)if(i.comments.items[e].is_like===t.data.data.like_id)i.comments.items[e].is_like=0;else for(var a in i.comments.items[e].moments_comment_reply.items)i.comments.items[e].moments_comment_reply.items[a].is_like==t.data.data.like_id&&(i.comments.items[e].moments_comment_reply.items[a].is_like=0)})},doCommentLike:function(t,e){var i=this;this.$axios.post(SYS.URL.moments.comment_like_add,{comment_id:t},{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){if(200==t.data.status)if(i.comments.items[e].comment_id===t.data.data.comment_id)i.comments.items[e].is_like=t.data.data.like_id;else for(var a in i.comments.items[e].moments_comment_reply.items)i.comments.items[e].moments_comment_reply.items[a].comment_id==t.data.data.comment_id&&(i.comments.items[e].moments_comment_reply.items[a].is_like=t.data.data.like_id)})},getCommentData:function(){var t=this;return new r.a(function(e,i){if(t.comments.more){var a={moments_id:t.id,page:t.comments.page,rows:10};t.$http.get(SYS.URL.moments.comment_lists,{params:a}).then(function(i){var a=i.data;if(200===a.status){for(var s in t.comments.page=a.data.page+1,t.comments.records=a.data.records,t.comments.total=a.data.total,a.data.total!=a.data.page&&0!=a.data.total||(t.comments.more=!1),a.data.items)a.data.items[s].moments_comment_reply.page==a.data.items[s].moments_comment_reply.total||0==a.data.items[s].moments_comment_reply.total?a.data.items[s].moments_comment_reply.more=!1:a.data.items[s].moments_comment_reply.more=!0;t.comments.items.push.apply(t.comments.items,a.data.items)}t.moreVisible=!0,t.loadBotVisible=!1,e(i)})}else t.loadBotVisible=!1})},getmore:function(){this.moreVisible=!1,this.loadBotVisible=!0,this.getCommentData()},clickModal:function(){this.isTrue=1,this.input_content=""},share:function(){if(isApp){var t=this.imgDetailData.moments_title,e=this.imgDetailData.moments_content,i=window.location.href,a=this.imgDetailData.moments_image[0];if("android"===isApp&&android.share(t,e,i,a),"ios"===isApp){var o={title:t,describe:e,url:i,imgUrl:a},n=s()(o);window.webkit.messageHandlers.share.postMessage(n)}}},back:function(t){this.$refs.fb_box==t.target&&(this.isShow=1)},cancel:function(){this.isShow=1},submit:function(){this.addComment()},showSheet:function(t,e,i,a){uid==t?this.actions[1]={name:"删除",method:this.rmComment}:this.actions[1]={name:"举报",method:this.complaint},this.comment_id=e,this.reply_id=a||0,this.comment_index=i,this.sheetVisible=!0,this.inputType="reply",this.rmType=a?"reply":"comment"},loadReply:function(t,e){var i=this;return this.moreVisible=!1,new r.a(function(a,s){if(i.comments.items[e].moments_comment_reply.more){var o={comment_id:i.comments.items[e].moments_comment_reply.items[0].comment_id,comment_parent_id:t,page:i.comments.items[e].moments_comment_reply.page,rows:5};i.$http.get(SYS.URL.moments.comment_lists,{params:o}).then(function(t){var s=t.data;200===s.status&&(i.comments.items[e].moments_comment_reply.page=s.data.page+1,i.comments.items[e].moments_comment_reply.records=s.data.records,i.comments.items[e].moments_comment_reply.total=s.data.total,s.data.total!=s.data.page&&0!=s.data.total||(i.comments.items[e].moments_comment_reply.more=!1),i.comments.items[e].moments_comment_reply.items.push.apply(i.comments.items[e].moments_comment_reply.items,s.data.items)),i.moreVisible=!1,a(t)})}})},loadRecommend:function(){var t=this,e={moments_id:this.id,page:1,rows:10,tag_id:this.imgDetailData.moments_tag_id[0]};return new r.a(function(i,a){t.$http.get(SYS.URL.moments.lists,{params:e}).then(function(e){var a=e.data;200===a.status&&(t.lists.page=a.data.page+1,t.lists.records=a.data.records,t.lists.total=a.data.total,t.lists.loaded=!0,a.data.total!=a.data.page&&0!=a.data.total||(t.lists.more=!1),t.lists.items.push.apply(t.lists.items,t.fixItems(a.data.items))),i(e)})})},fixItems:function(t){var e=this;return t.forEach(function(i,a){var s=e.maxWidth,o=i.image_heigth/i.image_width*e.maxWidth;o=Math.min(o,e.maxHeight),t[a].image_width=s,t[a].image_heigth=o,t[a].shown=!1,t[a].animate=!1}),t},productDetail:function(t){window.location.href=WapSiteUrl+"/tmpl/product_detail.html?product_id="+t},complaint:function(){this.$refs.complaint.init()},scrollAnimation:function(t,e){var i=this,a=e-t,s=t;setTimeout(function(){var o=Math.ceil(a/10);s+=o,window.scrollTo(s,t),a>10||a<-10?i.scrollAnimation(s,e):window.scrollTo(s,e)},1)},scrollTo:function(){var t=document.body.scrollTop||document.documentElement.scrollTop,e=document.querySelector(".comment").offsetTop;console.log(e),this.scrollAnimation(t,e)}},filters:{timeID:function(t){return new Date(t).toLocaleDateString()}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("header",[a("div",{staticClass:"header-left"},[a("a",{staticClass:"back",attrs:{href:"javascript:;"},on:{click:t.goback}},[a("img",{attrs:{src:i("2Bpz"),alt:""}})]),t._v(" "),a("router-link",{staticClass:"avator-img",attrs:{to:t.uid==t.imgDetailData.user_id?"/home":"/user/"+t.imgDetailData.user_id,tag:"div"}},[a("img",{attrs:{src:t.imgDetailData.user_avatar}})]),t._v(" "),a("router-link",{staticClass:"avator-info",attrs:{to:t.uid==t.imgDetailData.user_id?"/home":"/user/"+t.imgDetailData.user_id,tag:"div"}},[t._v(t._s(t.imgDetailData.user_nickname))])],1),t._v(" "),a("div",{staticClass:"header-right"},[t.uid!=t.imgDetailData.user_id?[t.imgDetailData.is_follow?a("div",{staticClass:"followed",on:{click:function(e){return t.rmFollow(t.imgDetailData.is_follow)}}},[t._v("已关注")]):a("div",{staticClass:"follow",on:{click:function(e){return t.addFollow(t.imgDetailData.user_id)}}},[t._v("关注")])]:t._e(),t._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:t.isApp,expression:"isApp"}],staticClass:"share",attrs:{href:"javascript:;"},on:{click:t.share}},[a("img",{attrs:{src:i("dHMc"),alt:""}})])],2)]),t._v(" "),a("div",{staticClass:"container"},[4===t.imgDetailData.moments_type?a("div",{staticClass:"video-wrapper",style:{height:t.imgDetailData.media_rows[0].height/t.imgDetailData.media_rows[0].width*t.maxWidth*2+"px"}},[a("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",attrs:{playsinline:!0,options:{autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",sources:[{type:"video/mp4",src:t.imgDetailData.moments_video}],poster:t.imgDetailData.moments_image[0],height:t.imgDetailData.media_rows[0].height/t.imgDetailData.media_rows[0].width*t.maxWidth*2,width:2*t.maxWidth}},on:{play:function(e){return t.onPlayerPlay(e)},pause:function(e){return t.onPlayerPause(e)}}}),t._v(" "),a("div",{staticClass:"video-player-icon",on:{click:t.play}},[a("img",{attrs:{src:i("RBJf")}})])],1):a("swiper",{attrs:{options:t.swiperOption}},[t._l(t.imgDetailData.moments_image,function(e,i){return a("swiper-slide",{key:i},[a("div",{staticClass:"img-count"},[t._v(t._s(i+1)+"/"+t._s(t.imgDetailData.moments_image.length))]),t._v(" "),a("img",{attrs:{src:e,alt:"",preview:"0"}})])}),t._v(" "),a("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2),t._v(" "),a("div",{staticClass:"detail-info"},[a("div",{staticClass:"detail-wrapper"},[a("h1",[t._v(t._s(t.imgDetailData.moments_title))]),t._v(" "),a("div",{staticClass:"detail-content"},[t._v(t._s(t.imgDetailData.moments_content))]),t._v(" "),a("div",{staticClass:"dynamic-tag"},t._l(t.imgDetailData.moments_tag,function(e){return a("router-link",{staticStyle:{"margin-right":".25rem"},attrs:{to:"/tag/"+e.tag_id}},[a("i",{staticClass:"icon icon-tag"}),t._v("\n              "+t._s(e.tag_name)+"\n            ")])}),1),t._v(" "),a("div",{staticClass:"release-time"},[t._v(t._s(t.imgDetailData.moments_time))])])]),t._v(" "),a("div",{staticClass:"comment",attrs:{id:"comment"}},[0!=t.comments.records?a("div",{staticClass:"comment-count"},[t._v("共"+t._s(t.comments.records)+"条评论")]):a("div",{staticClass:"comment-count"},[t._v("还没有评论")]),t._v(" "),a("div",{staticClass:"send-comment"},[a("div",{staticClass:"my-avator common-avator"},[a("img",{attrs:{src:t.imgDetailData.user_avatar}})]),t._v(" "),a("div",{staticClass:"send-comment-bar",on:{click:t.showInput}},[t._v("说点什么...")]),t._v(" "),a("div",{staticClass:"comment-list"},t._l(t.comments.items,function(e,i){return a("div",{key:e.comments_id,staticClass:"comment-item"},[a("div",{staticClass:"comment-wrapper"},[a("div",{staticClass:"comment-avator common-avator"},[a("router-link",{attrs:{to:t.uid==e.user_id?"/home":"/user/"+e.user_id}},[a("img",{attrs:{src:e.user_avatar}})])],1),t._v(" "),a("div",{staticClass:"comment-mid"},[a("div",{staticClass:"avator-name gray"},[a("router-link",{attrs:{to:t.uid==e.user_id?"/home":"/user/"+e.user_id}},[t._v("\n                      "+t._s(e.user_nickname)+"\n                    ")]),t._v(" "),t.imgDetailData.user_id==e.user_id?a("span",{staticClass:"author-sign"},[t._v("作者")]):t._e()],1),t._v(" "),a("div",{staticClass:"comment-content",on:{click:function(a){return t.showSheet(e.user_id,e.comment_id,i)}}},[a("span",{staticStyle:{"margin-right":".25rem"}},[t._v(t._s(e.comment_content))]),t._v(" "),a("span",{staticClass:"comment-time"},[t._v(t._s(e.comment_time))])])]),t._v(" "),a("div",{staticClass:"likes-right"},[e.is_like?a("i",{staticClass:"icon icon-small icon-liked",on:{click:function(a){return t.rmCommentLike(e.is_like,i)}}}):a("i",{staticClass:"icon icon-small icon-like",on:{click:function(a){return t.doCommentLike(e.comment_id,i)}}})])]),t._v(" "),e.moments_comment_reply?a("div",{staticClass:"reply-list"},[t._l(e.moments_comment_reply.items,function(s){return a("div",{key:s.comment_parent_id,staticClass:"reply-item"},[a("div",{staticClass:"reply-avator common-avator"},[a("router-link",{attrs:{to:t.uid==s.user_id?"/home":"/user/"+s.user_id}},[a("img",{attrs:{src:s.user_avatar}})])],1),t._v(" "),a("div",{staticClass:"reply-mid"},[a("div",{staticClass:"avator-name gray"},[a("router-link",{attrs:{to:t.uid==s.user_id?"/home":"/user/"+s.user_id}},[t._v("\n                           "+t._s(s.user_nickname)+"\n                      ")])],1),t._v(" "),a("div",{staticClass:"reply-content",on:{click:function(a){return t.showSheet(s.user_id,e.comment_id,i,s.comment_id)}}},[s.comment_parent_id>0?a("span",[t._v("回复 \n                        "),a("router-link",{staticClass:"user-name-to",attrs:{to:t.uid==s.user_id?"/home":"/user/"+s.user_id}},[t._v("\n                        @"+t._s(s.to_user_nickname)+"\n                        ")])],1):t._e(),t._v(" "),a("span",{staticStyle:{"margin-right":".25rem"}},[t._v(t._s(s.comment_content))]),t._v(" "),a("span",{staticClass:"reply-time"},[t._v(t._s(s.comment_time))])]),t._v(" "),a("div",{staticClass:"likes-right"},[s.is_like?a("i",{staticClass:"icon icon-small icon-liked",on:{click:function(e){return t.rmCommentLike(s.is_like,i)}}}):a("i",{staticClass:"icon icon-small icon-like",on:{click:function(e){return t.doCommentLike(s.comment_id,i)}}})])])])}),t._v(" "),e.moments_comment_reply.more?a("div",{directives:[{name:"show",rawName:"v-show",value:t.moreVisible,expression:"moreVisible"}],staticClass:"getmore",staticStyle:{"margin-left":"1.8rem","text-align":"left"},on:{click:function(a){return t.loadReply(e.comment_id,i)}}},[1==e.moments_comment_reply.page?a("a",{attrs:{href:"javascript:;"}},[t._v("\n                  展开"+t._s(e.moments_comment_reply.records>=6?6:e.moments_comment_reply.records)+"条回复\n                ")]):a("a",{attrs:{href:"javascript:;"}},[t._v("展开更多回复")])]):t._e()],2):t._e()])}),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loadBotVisible,expression:"loadBotVisible"}],staticClass:"mint-spinner-bottom"},[a("mt-spinner",{attrs:{type:"fading-circle"}})],1),t._v(" "),t.comments.more?a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loadBotVisible,expression:"!loadBotVisible"}],ref:"getmore",staticClass:"getmore"},[a("a",{attrs:{href:"javascript:;"},on:{click:t.getmore}},[t._v("加载更多")])]):t._e()]),t._v(" "),a("div",{ref:"modal",class:["modal",0==t.isTrue?"show":""]},[a("div",{staticClass:"zhanwei",on:{click:function(e){return t.clickModal()}}}),t._v(" "),a("div",{staticClass:"modal-content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.input_content,expression:"input_content"}],ref:"fabiao1",attrs:{type:"text",placeholder:"说点什么..."},domProps:{value:t.input_content},on:{input:function(e){e.target.composing||(t.input_content=e.target.value)}}}),t._v(" "),a("input",{attrs:{type:"button",value:"发表"},on:{click:t.submit}})])])]),t._v(" "),t.imgDetailData.moments_product_count>0?a("div",{staticClass:"product"},[a("div",{staticClass:"title"},[t._v("相关商品")]),t._v(" "),a("div",{staticClass:"product-wrapper"},[a("ul",{staticClass:"product-content"},t._l(t.imgDetailData.moments_product,function(e){return a("div",{staticClass:"product-item",style:{width:t.maxWidth+"px"},on:{click:function(i){return t.productDetail(e.product_id)}}},[a("div",{staticClass:"product-album",style:{width:t.maxWidth+"px",height:t.maxWidth+"px"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.product_image,expression:"product.product_image"}]})]),t._v(" "),a("div",{staticClass:"product-info"},[a("p",{staticClass:"product-name"},[t._v(t._s(e.product_name))]),t._v(" "),a("span",{staticClass:"product-desc"},[t._v(t._s(e.product_tips))]),t._v(" "),a("span",{staticClass:"product-price"},[t._v("￥"+t._s(e.product_unit_price))])])])}),0)])]):t._e(),t._v(" "),a("div",{staticClass:"recommend"},[a("div",{staticClass:"title"},[t._v("相关推荐")]),t._v(" "),a("list",{attrs:{lists:t.lists}})],1),t._v(" "),a("div",{staticClass:"comment-bar"},[a("div",{staticClass:"cmtbar-left",on:{click:t.showInput}},[t._m(0)]),t._v(" "),a("div",{staticClass:"cmtbar-right"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.rmLike(t.imgDetailData.is_like)}}},[t.imgDetailData.is_like?a("i",{staticClass:"icon icon-liked"}):a("i",{staticClass:"icon icon-like",on:{click:function(e){return t.doLike(t.imgDetailData.moments_id)}}}),t._v(" "),a("span",[t._v(t._s(t.imgDetailData.moments_like_count))])]),t._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.rmCollect(t.imgDetailData.is_collect)}}},[t.imgDetailData.is_collect?a("i",{staticClass:"icon icon-collected"}):a("i",{staticClass:"icon icon-collect",on:{click:function(e){return t.doCollect(t.imgDetailData.moments_id)}}}),t._v(" "),a("span",[t._v(t._s(t.imgDetailData.moments_collection_count))])]),t._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.scrollTo()}}},[a("i",{staticClass:"icon icon-comment"}),t._v(" "),a("span",[t._v(t._s(t.comments.records))])])])])],1),t._v(" "),a("mt-actionsheet",{attrs:{actions:t.actions,cancelText:t.cancelText},model:{value:t.sheetVisible,callback:function(e){t.sheetVisible=e},expression:"sheetVisible"}}),t._v(" "),a("complaint",{ref:"complaint",attrs:{comment_id:t.comment_id}}),t._v(" "),a("share",{ref:"share",attrs:{share:t.shareData}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loadPageVisible,expression:"loadPageVisible"}],staticClass:"page-load"},[a("mt-spinner",{attrs:{type:"fading-circle"}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"icon icon-edit"}),this._v("\n              说点什么\n            ")])}]};var I=i("VU/8")(E,x,!1,function(t){i("Z5Jw")},"data-v-963f427c",null);e.default=I.exports},Z5Jw:function(t,e){},dHMc:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEZElEQVR4Xu2bPW4XMRDFXyR6PioKJJITAB0dcAIIJQ0gDgCcIHAC4ASQlgbS0EJOAJwAOAEfHQUC/SJPNH9nd+P1f+31ApYiRcna6/f8Zjwz9m6ov52SdF3SVUkXw8/A473/+iDpmqRvOZ17+jAfxl27bfSMcF/SI0mQMEXblvR6ioEkPZXE/CD0haRnkj7njh0TAOBXYdVzx4z7fQ/qyZ5kNCDjnI/+9i6QsTt20p4AwL/tkPpeWL1cAExuynZH0vOeAUerwhMAeOzd2r4kXpYLfErQ8VibYW7ML1aDPZukCiPggaQn7i1IicGX0G6EueKwu9qgKiAA6X9yDo+V90pYAgnMMUsVEBDb1Fajsh+zEMep4pekl5JuQQDbk8kHh0fnpTbUfCE4chRxWdJZSecknegAtQUB753nvxu2kyURYMGaBWypc/8t6QwE8Is1Irapt63UCY15DrC3g1pzgrWfkm5KerM0AgBNhIq8hxqOHO9PuIz877mHf0i6YqH0EghghQl9cdZ9wAGMcu3H8ELWjgNPVIp6DvOI1gnAIROfdAH/GPICnHhXokWegGKsHQHPP1olAMAA79qRCNJY2aEINQl8qwQAmlg/dm4pwMEUg0cpmE9n+tyaAlh1wnLfAMDfUnanLvDYfG8tohUC+jLRh8HOU7bI0eBbMYEu8F+C/adWfbLAt0AApS3ScG/vhOPYbGoJLRv83ATEWSjzGZuGQyChvDX8xaDNx7Y0lw/okv3jsL2l2Lt/BjMhARoNfk4F+ASMeeSCpy9kooSUXeIIuXMowKq6Npmxsh+rkMHnaxNAkEPV2drs9YeaBBDeIn3z+Gx1SDfV20+68jZYTQJYeR/bX5rqdGcdZmoREEt/TIS3Dr5j+9YgAMkjfUtp2a6QfhOtBgFxUaKpslsNAr46xzfrltcludIENH/mUJoATpzM9ltb/YM7BiUJICkh07PW0omTLcxeSQJ8mtqS51/JIEsS4J1fSydOK8osRUAc+JyeO+R1pliFAJ/xtXbcXoUAn++vk+uXiBaLE0Doi/1bayryCyWzw92phA+It7++q3glVjdlzOIK8PeNWrN/CCpOgHeAs1d8OiRRnACKk5y/01pzgFUU4AloKQAyMRRXgE+AWtsBqiig9TtHxRXwzxPgb3O3lANU8wGkmyRD8YWllCClxjPFTaAGiHXe8Z8AX6kqkQusszo1+g4qYMpve2qAyXnHSrEGBdgFg1ZD1xyQQ338Qc0+BPjiZYvZ29QE+FB9t+uDiRbD16lIiGsV2/bJDMHLyfAWfufoetZz+6kQu3HiQ1ruJ2xatSb+aAqz4Aj7byEB8NxC9R+CHWSqvlzlbQPiUAIPZV0+KrCCuUMie+4e+xvnh4UaTwAsAZYrZ75ZSMtusRRF2M0xwMdfwK1cp4sLlnTk/r1VdHJZb7XfkVuofRVbfAL7pTnGVgGlzguHBx5820obKlmjBqIm+xorNo3Ul8/1HDENfgxFY8ad5vsHSXBMzMqGM/sAAAAASUVORK5CYII="}});