webpackJsonp([11],{JDFc:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("//Fk"),i=e.n(s),r=(e("7+uW"),e("7biW")),o=(e("KvKp"),{name:"search",components:{"my-search":r.a},data:function(){return{height:"2rem",keyword:"",visible:!0,loadVisible:!1,tab:"",data:{page:1,records:0,total:0,more:!0,items:[]},hot:[],history:[]}},methods:{search:function(t){this.height=t?"100%":"2rem",this.loadVisible=!0,this.loadSearch()},cancle:function(){this.keyword="",this.$router.push({path:"/index/"+this.tab})},initSearch:function(){var t=this;this.$http.get(SYS.URL.search_hot_info).then(function(a){var e=a.data;200===e.status&&(t.hot=e.data.search_hot_words,t.history=e.data.search_history_words)})},loadSearch:function(){var t=this,a={keyword:this.keyword,page:1,rows:10};return new i.a(function(e,s){t.$http.get(SYS.URL.moments.lists,{params:a}).then(function(a){var s=a.data;200===s.status&&(t.data.page=s.data.page+1,t.data.records=s.data.records,t.data.total=s.data.total,t.data.loaded=!0,s.data.total!=s.data.page&&0!=s.data.total||(t.data.more=!1),t.data.items=s.data.items),e(a)})})},remove:function(){var t=this;this.$http.get(SYS.URL.search_history_del).then(function(a){200===a.data.status&&(t.history=[])})},goKeyword:function(t){this.keyword=t,this.goBack()},goBack:function(){this.$router.push({path:"/index/"+this.tab+"/"+this.keyword})}},mounted:function(){this.tab=this.$route.params.tab,this.initSearch()}}),c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page"},[e("div",{staticClass:"search-container"},[e("div",{staticClass:"search-wrap"},[e("div",{staticClass:"search-header",style:{height:t.height}},[e("my-search",{ref:"search",attrs:{placeholder:"搜索"},on:{input:t.search,cancle:t.cancle},model:{value:t.keyword,callback:function(a){t.keyword=a},expression:"keyword"}},t._l(t.data.items,function(a,s){return e("div",{staticClass:"cell-item",on:{click:t.goBack}},[e("mt-cell",{attrs:{title:a.moments_title}})],1)}),0)],1),t._v(" "),e("div",{staticClass:"search-content"},[t.hot.length>0?e("div",{staticClass:"search-block"},[e("h4",[t._v("热门搜索\n                      \n                    ")]),t._v(" "),e("div",{staticClass:"search-list"},t._l(t.hot,function(a){return e("div",{staticClass:"search-ceil",on:{click:function(e){return t.goKeyword(a)}}},[t._v(t._s(a))])}),0)]):t._e(),t._v(" "),t.history.length>0?e("div",{staticClass:"search-block"},[e("h4",[t._v("\n                      历史记录\n                      "),e("i",{staticClass:"icon icon-remove",on:{click:t.remove}})]),t._v(" "),e("div",{staticClass:"search-list"},t._l(t.history,function(a){return e("div",{staticClass:"search-ceil",on:{click:function(e){return t.goKeyword(a)}}},[t._v(t._s(a))])}),0)]):t._e()])])])])},staticRenderFns:[]};var n=e("VU/8")(o,c,!1,function(t){e("SMbB")},"data-v-32d80c74",null);a.default=n.exports},SMbB:function(t,a){}});