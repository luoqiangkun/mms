webpackJsonp([3],{"7Jzd":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s("//Fk"),e=s.n(a),o=s("mw3O"),n=s.n(o),l=s("mzkE"),c=s("za2D"),r={name:"follow",components:{"foot-nav":l.a,"my-tab-container":c.a},data:function(){return{user_id:0,loading:!1,check:!1,swipeable:!0,loadBotVisible:!1,active:"tab-container1",maxDistance:0,scrollHeight:0,botStatus:"",tabstate:[0,0,0],data:{tab1:{page:1,records:0,total:0,more:!0,items:[],recommend:[]},tab2:{page:1,records:0,total:0,more:!0,items:[],recommend:[]},tab3:{page:1,records:0,total:0,more:!0,items:[],recommend:[]}}}},methods:{tabIndex:function(t){var i;return"tab-container1"===t&&(i=0),"tab-container2"===t&&(i=1),"tab-container3"===t&&(i=2),i},tabId:function(){return"tab"+(this.activeIndex+1)},renderTab:function(t){this.active=t,this.activeIndex=this.tabIndex(t),this.getKind(),this.tabstate[this.activeIndex]||(this.loadVisible=!0,this.loadTab()),this.tabstate[this.activeIndex]=1},getKind:function(){var t="";0===this.activeIndex&&(t="user"),1===this.activeIndex&&(t="store"),2===this.activeIndex&&(t="tag"),this.kind=t},getUrl:function(t){var i=void 0;return"user"===this.kind&&("recommend"===t&&(i=SYS.URL.moments.follow_recommend),"follow"===t&&(i=SYS.URL.moments.follow_user),"add"===t&&(i=SYS.URL.moments.follow_add),"remove"===t&&(i=SYS.URL.moments.follow_remove)),"store"===this.kind&&("recommend"===t&&(i=SYS.URL.moments.store_follow_recommend),"follow"===t&&(i=SYS.URL.moments.store_follow),"add"===t&&(i=SYS.URL.moments.store_follow_add),"remove"===t&&(i=SYS.URL.moments.store_follow_remove)),"tag"===this.kind&&("recommend"===t&&(i=SYS.URL.moments.tag_follow_recommend),"follow"===t&&(i=SYS.URL.moments.tag_follow),"add"===t&&(i=SYS.URL.moments.tag_follow_add),"remove"===t&&(i=SYS.URL.moments.tag_follow_remove)),i},loadTab:function(){var t=this;this.loadRecommend().then(function(){var i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,s=document.querySelector(".header").offsetHeight,a=document.querySelectorAll(".mint-tab-container-item")[t.activeIndex].getElementsByTagName("section")[0].offsetHeight;t.scrollHeight=i-s-a}),this.loadList()},loadRecommend:function(){var t=this,i=this.getUrl("recommend"),s={page:1,rows:3};return new e.a(function(a,e){t.$http.get(i,{params:s}).then(function(i){var s=i.data;if(200===s.status){var e=t.tabId();t.data[e].recommend=s.data.items}a(i)})})},loadList:function(){var t=this,i=this.tabId(),s=this.getUrl("follow"),a={page:this.data[i].page,rows:5,user_id:this.user_id};return new e.a(function(e,o){t.data[i].more?t.$http.get(s,{params:a}).then(function(s){var a=s.data;200===a.status&&(t.data[i].page=a.data.page+1,t.data[i].records=a.data.records,t.data[i].total=a.data.total,a.data.total!=a.data.page&&0!=a.data.total||(t.data[i].more=!1),t.data[i].items.push.apply(t.data[i].items,a.data.items)),e(s)}):e(!0)})},loadMore:function(){var t=this;this.loading=!0,this.loadBotVisible=!0,this.loadList().then(function(){t.loadBotVisible=!1,t.loading=!1})},doFollow:function(t,i,s){var a=this,o=this.getUrl("add"),l={};return"user"==this.kind&&(l.up_user_id=t),"store"==this.kind&&(l.store_id=t),"tag"==this.kind&&(l.tag_id=t),new e.a(function(t,e){a.$http.post(o,n.a.stringify(l)).then(function(e){var o=e.data;if(200===o.status){var n=a.tabId();"recommend"===s?(a.data[n].recommend[i].is_follow=!0,a.data[n].recommend[i].follow_id=o.data.follow_id):(a.data[n].items[i].is_follow=!0,a.data[n].items[i].follow_id=o.data.follow_id)}t(e)})})},rmFollow:function(t,i,s){var a=this,o=this.getUrl("remove"),l=n.a.stringify({follow_id:t});return new e.a(function(t,e){a.$http.post(o,l).then(function(e){if(200===e.data.status){var o=a.tabId();"recommend"===s?a.data[o].recommend[i].is_follow=!1:a.data[o].items[i].is_follow=!1}t(e)})})},goBack:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.go(-1)},store:function(t){window.location.href=WapSiteUrl+"/tmpl/store.html?store_id="+t},more:function(){this.$router.push({path:"/recommend/"+this.active})},startMove:function(){this.maxDistance=.001},endMove:function(){this.maxDistance=0}},mounted:function(){this.active=this.$route.params.tab?this.$route.params.tab:"tab-container1",this.renderTab(this.active)},watch:{active:{handler:function(t){this.renderTab(t),this.maxDistance=0},deep:!0}},created:function(){this.user_id=this.$route.params.user_id?this.$route.params.user_id:uid}},d={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"page"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-back",on:{click:t.goBack}}),t._v(" "),t.user_id==t.uid?a("h1",{staticClass:"header-title header-title-top"},[t._v("\n            我的关注\n        ")]):a("h1",{staticClass:"header-title header-title-top"},[t._v("\n            TA的关注\n        ")]),t._v(" "),a("div",{staticClass:"header-nav"},[a("div",{staticClass:"nav-inner"},[a("div",{staticClass:"nav-inner-item",class:"tab-container1"==t.active?"selected":"",on:{click:function(i){return t.renderTab("tab-container1")}}},[a("span",[t._v("用户")])]),t._v(" "),a("div",{staticClass:"nav-inner-item",class:"tab-container2"==t.active?"selected":"",on:{click:function(i){return t.renderTab("tab-container2")}}},[a("span",[t._v("商家")])]),t._v(" "),a("div",{staticClass:"nav-inner-item",class:"tab-container3"==t.active?"selected":"",on:{click:function(i){return t.renderTab("tab-container3")}}},[a("span",[t._v("话题")])])])])]),t._v(" "),a("div",{staticClass:"tab-container",staticStyle:{top:"3.1rem"}},[a("my-tab-container",{staticClass:"page-tabbar-tab-container",attrs:{swipeable:t.swipeable},model:{value:t.active,callback:function(i){t.active=i},expression:"active"}},[a("mt-tab-container-item",{ref:"tab-container1",attrs:{id:"tab-container1"}},[a("section",[a("div",{staticClass:"section-container"},[a("div",{staticClass:"section-title"},[a("h3",[t._v("你可能有兴趣的人")]),t._v(" "),a("div",{staticClass:"right-more",on:{click:t.more}},[a("span",[t._v("查看更多")]),t._v(" "),a("i",{staticClass:"icon icon-right-arrow"})])]),t._v(" "),a("div",{staticClass:"section-wrapper"},[a("ul",{ref:"",staticClass:"section-lists"},t._l(t.data.tab1.recommend,function(i,s){return a("li",{staticClass:"section-item"},[a("div",{staticClass:"section-content"},[a("router-link",{attrs:{to:t.uid==i.user_id?"/home":"/user/"+i.user_id}},[a("div",{staticClass:"album-block"},[a("img",{attrs:{src:i.user_avatar}})]),t._v(" "),a("div",{staticClass:"info-block"},[a("h3",[t._v(t._s(i.user_nickname))]),t._v(" "),a("span",[t._v("你可能感兴趣")])])])],1),t._v(" "),a("div",{staticClass:"section-btn"},[i.is_follow?a("span",{staticClass:"btn-followed",on:{click:function(a){return t.rmFollow(i.follow_id,s,"recommend")}}},[t._v("已关注")]):a("span",{staticClass:"btn-follow",on:{click:function(a){return t.doFollow(i.user_id,s,"recommend")}}},[t._v("关注")])])])}),0)])])]),t._v(" "),a("section",[t.data.tab1.items.length>0?a("div",{staticClass:"section-container"},[a("div",{staticClass:"section-title"},[a("h3",[t._v("正在关注")])]),t._v(" "),a("div",{staticClass:"section-wrapper"},[a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],ref:"wrapper1",staticClass:"section-lists",style:{height:t.scrollHeight+"px"},attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"check"}},t._l(t.data.tab1.items,function(i,s){return a("li",{staticClass:"section-item"},[a("div",{staticClass:"section-content"},[a("router-link",{attrs:{to:t.uid==i.up_user_id?"/home":"/user/"+i.up_user_id}},[a("div",{staticClass:"album-block"},[a("img",{attrs:{src:i.user_avatar}})]),t._v(" "),a("div",{staticClass:"info-block"},[a("h3",[t._v(t._s(i.user_nickname))]),t._v(" "),a("span",[t._v("你可能感兴趣")])])])],1),t._v(" "),a("div",{staticClass:"section-btn"},[i.is_follow?a("span",{staticClass:"btn-followed",on:{click:function(a){return t.rmFollow(i.follow_id,s,"follow")}}},[t._v("已关注")]):a("span",{staticClass:"btn-follow",on:{click:function(a){return t.doFollow(i.up_user_id,s,"follow")}}},[t._v("关注")])])])}),0)])]):a("div",{staticClass:"no-record",style:{height:t.scrollHeight+"px"}},[a("div",{staticClass:"no-record-content"},[a("div",{staticClass:"no-record-bg"},[a("img",{staticStyle:{width:"60px"},attrs:{src:s("ujB/")}})]),t._v(" "),a("p",[t._v("您还有没关注的up主哦~~")])])])])]),t._v(" "),a("mt-tab-container-item",{attrs:{id:"tab-container2"}},[a("section",[a("div",{staticClass:"section-container"},[a("div",{staticClass:"section-title"},[a("h3",[t._v("你可能有兴趣的商家")]),t._v(" "),a("div",{staticClass:"right-more",on:{click:t.more}},[a("span",[t._v("查看更多")]),t._v(" "),a("i",{staticClass:"icon icon-right-arrow"})])]),t._v(" "),a("div",{staticClass:"section-wrapper"},[a("ul",{staticClass:"section-lists"},t._l(t.data.tab2.recommend,function(i,s){return a("li",{staticClass:"section-item"},[a("div",{staticClass:"section-content",on:{click:function(s){return t.store(i.store_id)}}},[a("div",{staticClass:"album-block"},[a("img",{attrs:{src:i.store_logo}})]),t._v(" "),a("div",{staticClass:"info-block"},[a("h3",[t._v(t._s(i.store_name))]),t._v(" "),a("span",[t._v("你可能感兴趣")])])]),t._v(" "),a("div",{staticClass:"section-btn"},[i.is_follow?a("span",{staticClass:"btn-followed",on:{click:function(a){return t.rmFollow(i.follow_id,s,"recommend")}}},[t._v("已关注")]):a("span",{staticClass:"btn-follow",on:{click:function(a){return t.doFollow(i.store_id,s,"recommend")}}},[t._v("关注")])])])}),0)])])]),t._v(" "),a("section",[t.data.tab2.items.length>0?a("div",{staticClass:"section-container"},[a("div",{staticClass:"section-title"},[a("h3",[t._v("正在关注")])]),t._v(" "),a("div",{staticClass:"section-wrapper"},[a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],ref:"wrapper2",staticClass:"section-lists",style:{height:t.scrollHeight+"px"},attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"check"}},t._l(t.data.tab2.items,function(i,s){return a("li",{staticClass:"section-item"},[a("div",{staticClass:"section-content",on:{click:function(s){return t.store(i.store_id)}}},[a("div",{staticClass:"album-block"},[a("img",{attrs:{src:i.store_logo}})]),t._v(" "),a("div",{staticClass:"info-block"},[a("h3",[t._v(t._s(i.store_name))]),t._v(" "),a("span",[t._v("你可能感兴趣")])])]),t._v(" "),a("div",{staticClass:"section-btn"},[i.is_follow?a("span",{staticClass:"btn-followed",on:{click:function(a){return t.rmFollow(i.follow_id,s,"follow")}}},[t._v("已关注")]):a("span",{staticClass:"btn-follow",on:{click:function(a){return t.doFollow(i.store_id,s,"follow")}}},[t._v("关注")])])])}),0)])]):a("div",{staticClass:"no-record",style:{height:t.scrollHeight+"px"}},[a("div",{staticClass:"no-record-content"},[a("div",{staticClass:"no-record-bg"},[a("img",{staticStyle:{width:"60px"},attrs:{src:s("9XG9")}})]),t._v(" "),a("p",[t._v("您还有没关注的商家哦~~")])])])])]),t._v(" "),a("mt-tab-container-item",{attrs:{id:"tab-container3"}},[a("section",[a("div",{staticClass:"section-container"},[a("div",{staticClass:"section-title"},[a("h3",[t._v("你可能有兴趣的话题")]),t._v(" "),a("div",{staticClass:"right-more",on:{click:t.more}},[a("span",[t._v("查看更多")]),t._v(" "),a("i",{staticClass:"icon icon-right-arrow"})])]),t._v(" "),a("div",{staticClass:"section-wrapper"},[a("ul",{staticClass:"section-lists"},t._l(t.data.tab3.recommend,function(i,s){return a("li",{staticClass:"section-item"},[a("div",{staticClass:"section-content"},[a("router-link",{attrs:{to:"/tag/"+i.tag_id}},[a("div",{staticClass:"album-block"},[a("img",{attrs:{src:i.tag_album}})]),t._v(" "),a("div",{staticClass:"info-block"},[a("h3",[t._v(t._s(i.tag_name))]),t._v(" "),a("span",[t._v("你可能感兴趣")])])])],1),t._v(" "),a("div",{staticClass:"section-btn"},[i.is_follow?a("span",{staticClass:"btn-followed",on:{click:function(a){return t.rmFollow(i.follow_id,s,"recommend")}}},[t._v("已关注")]):a("span",{staticClass:"btn-follow",on:{click:function(a){return t.doFollow(i.tag_id,s,"recommend")}}},[t._v("关注")])])])}),0)])])]),t._v(" "),a("section",[t.data.tab3.items.length>0?a("div",{staticClass:"section-container"},[a("div",{staticClass:"section-title"},[a("h3",[t._v("正在关注")])]),t._v(" "),a("div",{staticClass:"section-wrapper"},[a("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],ref:"wrapper3",staticClass:"section-lists",style:{height:t.scrollHeight+"px"},attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"check"}},t._l(t.data.tab3.items,function(i,s){return a("li",{staticClass:"section-item"},[a("div",{staticClass:"section-content"},[a("router-link",{attrs:{to:"/tag/"+i.tag_id}},[a("div",{staticClass:"album-block"},[a("img",{attrs:{src:i.tag_album}})]),t._v(" "),a("div",{staticClass:"info-block"},[a("h3",[t._v(t._s(i.tag_name))]),t._v(" "),a("span",[t._v("你可能感兴趣")])])])],1),t._v(" "),a("div",{staticClass:"section-btn"},[i.is_follow?a("span",{staticClass:"btn-followed",on:{click:function(a){return t.rmFollow(i.follow_id,s,"follow")}}},[t._v("已关注")]):a("span",{staticClass:"btn-follow",on:{click:function(a){return t.doFollow(i.tag_id,s,"follow")}}},[t._v("关注")])])])}),0)])]):a("div",{staticClass:"no-record",style:{height:t.scrollHeight+"px"}},[a("div",{staticClass:"no-record-content"},[a("div",{staticClass:"no-record-bg"},[a("img",{staticStyle:{width:"60px"},attrs:{src:s("CYSH")}})]),t._v(" "),a("p",[t._v("您还有没关注的话题哦~~")])])])])])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loadBotVisible,expression:"loadBotVisible"}],staticClass:"mint-spinner-bottom"},[a("mt-spinner",{attrs:{type:"fading-circle"}})],1)],1)])},staticRenderFns:[]};var v=s("VU/8")(r,d,!1,function(t){s("kIH0")},"data-v-e3c25e5e",null);i.default=v.exports},"9XG9":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFE0lEQVR4Xu1aXVIjNxBWj3nCVIWcIOYNLFVlOcGGEyw5QbwnWHKCeE+AOUHMCZY9QcgJllRJhrd1ThBT5eHJdqd6onEJWRpJYHuHMPM6M62vv271nwTslT/wyvVnDQGNB7xyBpotkOoAnU5nf29v7wNj7CfG2BvG2H6qjHV/j4hjABgj4lApdZkiP8kDOOdvAOCPOijtUxIRb/I8PxmPx5MYIqIJ0Jb/WmflDYUn0+n0IIaEaAKEEH3G2G8xrNbkm49SSsJc+UQR4LI+Il7O5/P+3d3dOLTIpt8fHh52Wq1WHwB+Mb1ASvl9aO0oAjjnZwBwXgpDxL+VUp2Q8G2/F0LQvv/OwPleKTWswhFLwFcAMBWOcq9tE9DtdgdZllGGKp9rKeXJswgQQlC6o8i/fGaz2UEdXN9WjLbCzs4OBeporEEP4JxfAcA7w60ulVK9bVs3dj0hxDVj7G35/WKxuBiNRme+/ysJcDHKGDuRUtIitXw45z0A+D02GFYSYO8pRPxLKUXVX60fzjlVhj/EBEMvAZ7UF4yqdWDGrlmoOlRKHbuweQlwuNK9lPKb1/0xBLu2LiIeK6Vu7P+rCPgCAEt3DwWTGGDb/CY2eDsJiEl9+ptPNegNqPj52Q7MR0dHp61Wi/CVj7M/cBLAOR+aZSUiflZKnZoWFEL8UwPlC0jUDiulDmwPiwmGPg+wlVtJfXbZuU33ttfyleaOYLhSw6wQoHv+L8YizuBHW4AGEGa6+RYkkPIA0HPVJrYuLk9ZIcCx//+UUlI5/CIfIQSawKWUj3R2eYBdSb0uAhoP+G/uZ8aAScxgwd4fuhgpBhSz2ezyKd0jpbIsy94CAKWwi5gRl4nDToWuUt6XBZIHC+bCWnkisawcJ4h44qrEfIElpZz1yYgphmLrgHGe58exFuCcP6oida6Ontb6ps8p1aijECIYK+ncSYCnlg4qQA1Uu90+p7TksgqlzTzPf60ikpRnjH2yJlCmuDMp5UVVSvIQ6Azm3l7AMV4qKi5EPBuNRp9tAN1u9x0A0GCysl2mzowxNrAPMIwDFxpehJquK0T8aG8pQ8bKNDi5GdLWvAaAHx2VV3ESwxijWLGPiB2XxSjo0L8uGfpfsztz1hpUhgMAvVsOO0s85YmQgc8nw9vGVw5EqkgIVUWkfJ7nBaB2u+0kMkJGUbpql6Yp1AoJIRmMscoBbnAmSCTs7u72rWlr5boUrB4eHvrlXn+CjPv5fN67vb29KhfScYlG3Mt5X0D5FRmu74MElD+RFRCxl2UZBTiXJe4Xi8VwsVgMfDmflMiyjM4YTl09hN4yFCiHvkCpexCqVs1DkKVuWsYgz/OrmKwVTYAjzy/PCRBxkpLjSZa26FLGdDq9iQFs4tBbowiYT8FQxKeIPfS//iRIgLZUcSzmSj11Y0fPMs/JIwDgfWiEHyRACEGnQkU0901e6kSCOamqmgaXmGMIqOyn66Q8YQn1/zbehoCQBVMZDcnb9PtUvI0HhCySymhI3qbfp+JtPCBkkVRGQ/I2/T4Vb+MBIYukMhqSt+n3qXgbDwhZJJXRkLxNv0/FG+MBj0bkdb4j5DgHCN5nDBJgz9Y3bcF1yqfbrKEbbUECXJcl1glyw7KCN9qCBBBAx32hDeN+vnhEjLrQFUWAbjPpPgDN85aXJp8Pc/0S9Bh9EBqERM8D1g+xXhKjPaBesNeHpiFgfVy+TEmNB7xMu60PdeMB6+PyZUr6FyHBHG7P8W8GAAAAAElFTkSuQmCC"},CYSH:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADKUlEQVR4Xu2a4VHdMBCElwYgVABUAKmAJA0AFQQqIFQQqCCkApIKklQAHUA6gApIKkjmY+5mPB7Zch6WiGTpj9/Dws+3t3vak72mhY+1hcevBkBjwMIRaBJ4IQLsSTqQ9MZ+/0bSD0l3ue8nNwNeSfoo6cNAoJeSLiT9ygVEbgDI9L5l+7yTcRjBd1jBnLc1AkDWP0n6Kul4IMAvkt5LOpMEG5KPnAy4t2i2I1Ex74+kneTRS9mMEBS/NX1DdQb1gGwzYIXrnvPUidc5imIuBlDtrzsA8P1KkrOBrJ+Y/pEH56oCgGw/GgBknAwzPtvx1I6+CsAYimHykYsBBOLa9iJIpj1IGEEB3DLaw4YsniAHAGSfDD8YtanwBNtf65mH/p0NfMYTJB2pAYDK30zrBHNoWUbfvir0A2QOAG3kYENKANC5V3xsLpQHEIrhd0lHI6mFDYCAMWIkY0MKAAiSKs7xtwVOwD4odNAcALp/D+GRnA1zAxDKekjr0J9VASl4jRjqAZKyYU4A3OyEsh7SObWBZRAWIAs+DzVJ/H+XDbN5hDkB6JudWPX2xmjTlkPsL4GNDXeJNEuz+ISXAgAHuC7pnRU7bDLLpO8PDIFQDQBkb9eCh9oAMqUoVgMA9YLVgL0BagaBTWl/qwEgVh+ql0ADYEUEmgSslS5+GVyRAE/FErfZACjJCOHlsbg4vSkPP5hLK/wz0CwVywC/cRqjsb0An4c3wCv09wyKBQDNu/dnqwsN97tE7yWYO+QKiwYAKRA8+35sdrDv54Nz9ANY4rGusGgACNZbZj53n/7QErP7g+6ZU7UT9H1/pzpZ55HZkO67YBTPAA/GnwFSB6D/mO6rBICgvSUmwNhukINQLAP8xv/FAYbcXgOgJivcXfenbs01BpTKgMXXANb6/pshGB7Wf0bonSBcY98uFyuBUPVfVA1oAAQQaAywZ4JgU/0yGJIARdHfF/T3CGJOsaoiGAs2dL4BUKoRWiXbjQEBBJoEmgQKeDI0l97HrvNfviPEDaPR2GsuzwWIrbSpviH6W1MdWPRCpU5oAJSaubnuuzFgLiRLvc7iGfAX9UslUGspA+wAAAAASUVORK5CYII="},kIH0:function(t,i){}});