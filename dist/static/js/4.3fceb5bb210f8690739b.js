webpackJsonp([4],{"9XG9":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFE0lEQVR4Xu1aXVIjNxBWj3nCVIWcIOYNLFVlOcGGEyw5QbwnWHKCeE+AOUHMCZY9QcgJllRJhrd1ThBT5eHJdqd6onEJWRpJYHuHMPM6M62vv271nwTslT/wyvVnDQGNB7xyBpotkOoAnU5nf29v7wNj7CfG2BvG2H6qjHV/j4hjABgj4lApdZkiP8kDOOdvAOCPOijtUxIRb/I8PxmPx5MYIqIJ0Jb/WmflDYUn0+n0IIaEaAKEEH3G2G8xrNbkm49SSsJc+UQR4LI+Il7O5/P+3d3dOLTIpt8fHh52Wq1WHwB+Mb1ASvl9aO0oAjjnZwBwXgpDxL+VUp2Q8G2/F0LQvv/OwPleKTWswhFLwFcAMBWOcq9tE9DtdgdZllGGKp9rKeXJswgQQlC6o8i/fGaz2UEdXN9WjLbCzs4OBeporEEP4JxfAcA7w60ulVK9bVs3dj0hxDVj7G35/WKxuBiNRme+/ysJcDHKGDuRUtIitXw45z0A+D02GFYSYO8pRPxLKUXVX60fzjlVhj/EBEMvAZ7UF4yqdWDGrlmoOlRKHbuweQlwuNK9lPKb1/0xBLu2LiIeK6Vu7P+rCPgCAEt3DwWTGGDb/CY2eDsJiEl9+ptPNegNqPj52Q7MR0dHp61Wi/CVj7M/cBLAOR+aZSUiflZKnZoWFEL8UwPlC0jUDiulDmwPiwmGPg+wlVtJfXbZuU33ttfyleaOYLhSw6wQoHv+L8YizuBHW4AGEGa6+RYkkPIA0HPVJrYuLk9ZIcCx//+UUlI5/CIfIQSawKWUj3R2eYBdSb0uAhoP+G/uZ8aAScxgwd4fuhgpBhSz2ezyKd0jpbIsy94CAKWwi5gRl4nDToWuUt6XBZIHC+bCWnkisawcJ4h44qrEfIElpZz1yYgphmLrgHGe58exFuCcP6oida6Ontb6ps8p1aijECIYK+ncSYCnlg4qQA1Uu90+p7TksgqlzTzPf60ikpRnjH2yJlCmuDMp5UVVSvIQ6Azm3l7AMV4qKi5EPBuNRp9tAN1u9x0A0GCysl2mzowxNrAPMIwDFxpehJquK0T8aG8pQ8bKNDi5GdLWvAaAHx2VV3ESwxijWLGPiB2XxSjo0L8uGfpfsztz1hpUhgMAvVsOO0s85YmQgc8nw9vGVw5EqkgIVUWkfJ7nBaB2u+0kMkJGUbpql6Yp1AoJIRmMscoBbnAmSCTs7u72rWlr5boUrB4eHvrlXn+CjPv5fN67vb29KhfScYlG3Mt5X0D5FRmu74MElD+RFRCxl2UZBTiXJe4Xi8VwsVgMfDmflMiyjM4YTl09hN4yFCiHvkCpexCqVs1DkKVuWsYgz/OrmKwVTYAjzy/PCRBxkpLjSZa26FLGdDq9iQFs4tBbowiYT8FQxKeIPfS//iRIgLZUcSzmSj11Y0fPMs/JIwDgfWiEHyRACEGnQkU0901e6kSCOamqmgaXmGMIqOyn66Q8YQn1/zbehoCQBVMZDcnb9PtUvI0HhCySymhI3qbfp+JtPCBkkVRGQ/I2/T4Vb+MBIYukMhqSt+n3qXgbDwhZJJXRkLxNv0/FG+MBj0bkdb4j5DgHCN5nDBJgz9Y3bcF1yqfbrKEbbUECXJcl1glyw7KCN9qCBBBAx32hDeN+vnhEjLrQFUWAbjPpPgDN85aXJp8Pc/0S9Bh9EBqERM8D1g+xXhKjPaBesNeHpiFgfVy+TEmNB7xMu60PdeMB6+PyZUr6FyHBHG7P8W8GAAAAAElFTkSuQmCC"},CYSH:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAADKUlEQVR4Xu2a4VHdMBCElwYgVABUAKmAJA0AFQQqIFQQqCCkApIKklQAHUA6gApIKkjmY+5mPB7Zch6WiGTpj9/Dws+3t3vak72mhY+1hcevBkBjwMIRaBJ4IQLsSTqQ9MZ+/0bSD0l3ue8nNwNeSfoo6cNAoJeSLiT9ygVEbgDI9L5l+7yTcRjBd1jBnLc1AkDWP0n6Kul4IMAvkt5LOpMEG5KPnAy4t2i2I1Ex74+kneTRS9mMEBS/NX1DdQb1gGwzYIXrnvPUidc5imIuBlDtrzsA8P1KkrOBrJ+Y/pEH56oCgGw/GgBknAwzPtvx1I6+CsAYimHykYsBBOLa9iJIpj1IGEEB3DLaw4YsniAHAGSfDD8YtanwBNtf65mH/p0NfMYTJB2pAYDK30zrBHNoWUbfvir0A2QOAG3kYENKANC5V3xsLpQHEIrhd0lHI6mFDYCAMWIkY0MKAAiSKs7xtwVOwD4odNAcALp/D+GRnA1zAxDKekjr0J9VASl4jRjqAZKyYU4A3OyEsh7SObWBZRAWIAs+DzVJ/H+XDbN5hDkB6JudWPX2xmjTlkPsL4GNDXeJNEuz+ISXAgAHuC7pnRU7bDLLpO8PDIFQDQBkb9eCh9oAMqUoVgMA9YLVgL0BagaBTWl/qwEgVh+ql0ADYEUEmgSslS5+GVyRAE/FErfZACjJCOHlsbg4vSkPP5hLK/wz0CwVywC/cRqjsb0An4c3wCv09wyKBQDNu/dnqwsN97tE7yWYO+QKiwYAKRA8+35sdrDv54Nz9ANY4rGusGgACNZbZj53n/7QErP7g+6ZU7UT9H1/pzpZ55HZkO67YBTPAA/GnwFSB6D/mO6rBICgvSUmwNhukINQLAP8xv/FAYbcXgOgJivcXfenbs01BpTKgMXXANb6/pshGB7Wf0bonSBcY98uFyuBUPVfVA1oAAQQaAywZ4JgU/0yGJIARdHfF/T3CGJOsaoiGAs2dL4BUKoRWiXbjQEBBJoEmgQKeDI0l97HrvNfviPEDaPR2GsuzwWIrbSpviH6W1MdWPRCpU5oAJSaubnuuzFgLiRLvc7iGfAX9UslUGspA+wAAAAASUVORK5CYII="},OQYS:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i("mvHQ"),s=i.n(e),n=i("//Fk"),o=i.n(n),l=i("bOdI"),r=i.n(l),c=i("mw3O"),d=i.n(c),m=i("mzkE"),v=i("za2D"),u=i("r+/8"),p={name:"recommend",components:{"foot-nav":m.a,"my-tab-container":v.a},data:function(){return{loadTopVisible:!1,loadBotVisible:!1,loading:!1,swipeable:!0,check:!1,active:"tab-container1",maxDistance:0,scrollHeight:0,botStatus:"",tabstate:[0,0,0],data:{tab1:{page:1,rows:5,records:0,total:0,more:!0,items:[]},tab2:{page:1,rows:5,records:0,total:0,more:!0,items:[]},tab3:{page:1,rows:10,records:0,total:0,more:!0,items:[]}}}},methods:{tabIndex:function(t){var a;return"tab-container1"===t&&(a=0),"tab-container2"===t&&(a=1),"tab-container3"===t&&(a=2),a},tabId:function(){return"tab"+(this.activeIndex+1)},renderTab:function(t){this.active=t,this.activeIndex=this.tabIndex(t),this.getKind(),this.tabstate[this.activeIndex]||(this.loadTopVisible=!0,this.loadTab()),this.tabstate[this.activeIndex]=1},getKind:function(){var t="";0===this.activeIndex&&(t="user"),1===this.activeIndex&&(t="store"),2===this.activeIndex&&(t="tag"),this.kind=t},getUrl:function(t){var a=void 0;return"user"===this.kind&&("recommend"===t&&(a=SYS.URL.moments.follow_recommend),"follow"===t&&(a=SYS.URL.moments.follow_user),"add"===t&&(a=SYS.URL.moments.follow_add),"remove"===t&&(a=SYS.URL.moments.follow_remove)),"store"===this.kind&&("recommend"===t&&(a=SYS.URL.moments.store_follow_recommend),"follow"===t&&(a=SYS.URL.moments.store_follow),"add"===t&&(a=SYS.URL.moments.store_follow_add),"remove"===t&&(a=SYS.URL.moments.store_follow_remove)),"tag"===this.kind&&("recommend"===t&&(a=SYS.URL.moments.tag_follow_recommend),"follow"===t&&(a=SYS.URL.moments.tag_follow),"add"===t&&(a=SYS.URL.moments.tag_follow_add),"remove"===t&&(a=SYS.URL.moments.tag_follow_remove)),a},loadTab:function(){var t=this;this.loadList().then(function(){if("tag"===t.kind)return!0;var a=t.tabId(),i=t.data[a].items;for(var e in i){var s=0,n=t.$refs["tab"+(t.activeIndex+1)+"_card_"+e][0];console.log(n);var o=n.querySelector(".card-lists"),l=n.querySelectorAll(".card-item");if(l.length>2){var c;s+=l[0].offsetWidth*l.length,o.style.width=s+20+"px";var d=new u.a(n,(c={scrollX:0,click:!0},r()(c,"scrollX",!0),r()(c,"scrollY",!1),r()(c,"eventPassthrough","vertical"),c));d.on("beforeScrollStart",function(a){t.swipeable=!1}),d.on("scrollStart",function(a){t.swipeable=!1}),d.on("scrollEnd",function(a){t.swipeable=!0})}}return!0}).then(function(){t.loading=!1,t.loadTopVisible=!1,t.loadBotVisible=!1})},loadList:function(){var t=this,a=this.tabId(),i=this.getUrl("recommend"),e={page:this.data[a].page,rows:this.data[a].rows};return new o.a(function(s,n){t.data[a].more?t.$http.get(i,{params:e}).then(function(i){var e=i.data;200===e.status&&(t.data[a].page=e.data.page+1,t.data[a].records=e.data.records,t.data[a].total=e.data.total,e.data.total!=e.data.page&&0!=e.data.total||(t.data[a].more=!1),t.data[a].items.push.apply(t.data[a].items,e.data.items)),s(i)}):s(!0)})},loadMore:function(){var t=this;this.loading=!0,this.loadBotVisible=!0,this.loadList().then(function(){t.loadBotVisible=!1,t.loading=!1})},doFollow:function(t,a,i){var e=this,s=this.getUrl("add"),n={};return"user"==this.kind&&(n.up_user_id=t),"store"==this.kind&&(n.store_id=t),"tag"==this.kind&&(n.tag_id=t),new o.a(function(t,i){e.$http.post(s,d.a.stringify(n)).then(function(i){var s=i.data;if(200===s.status){var n=e.tabId();e.data[n].items[a].is_follow=!0,e.data[n].items[a].follow_id=s.data.follow_id}t(i)})})},rmFollow:function(t,a,i){var e=this,s=this.getUrl("remove"),n=d.a.stringify({follow_id:t});return new o.a(function(t,i){e.$http.post(s,n).then(function(i){if(200===i.data.status){var s=e.tabId();e.data[s].items[a].is_follow=!1}t(i)})})},store:function(t){window.location.href=WapSiteUrl+"/tmpl/store.html?store_id="+t},productDetail:function(t){window.location.href=WapSiteUrl+"/tmpl/product_detail.html?product_id="+t},goBack:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.go(-1)},startMove:function(){this.maxDistance=.001},endMove:function(){this.maxDistance=0},jumpVideoPlay:function(t){if(isApp){if("android"===isApp&&android.jumpVideoPlay(t,this.getKind()),"ios"===isApp){var a={moments_id:t,kind:this.getKind()},i=s()(a);window.webkit.messageHandlers.jumpVideoPlay.postMessage(i)}}else this.$router.push({path:"/detail/"+t})}},mounted:function(){this.active=this.$route.params.tab?this.$route.params.tab:"tab-container1",this.renderTab(this.active);var t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,a=document.querySelector(".header").offsetHeight;this.scrollHeight=t-a},watch:{active:{handler:function(t){this.renderTab(t),this.maxDistance=0},deep:!0}},created:function(){}},f={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page"},[e("div",{staticClass:"header"},[e("div",{staticClass:"header-back",on:{click:t.goBack}}),t._v(" "),e("h1",{staticClass:"header-title header-title-top"},[t._v("\n            推荐关注\n        ")]),t._v(" "),e("div",{staticClass:"header-nav"},[e("div",{staticClass:"nav-inner"},[e("div",{staticClass:"nav-inner-item",class:"tab-container1"==t.active?"selected":"",on:{click:function(a){return t.renderTab("tab-container1")}}},[e("span",[t._v("用户")])]),t._v(" "),e("div",{staticClass:"nav-inner-item",class:"tab-container2"==t.active?"selected":"",on:{click:function(a){return t.renderTab("tab-container2")}}},[e("span",[t._v("商家")])]),t._v(" "),e("div",{staticClass:"nav-inner-item",class:"tab-container3"==t.active?"selected":"",on:{click:function(a){return t.renderTab("tab-container3")}}},[e("span",[t._v("话题")])])])])]),t._v(" "),e("div",{staticClass:"tab-container",staticStyle:{top:"3.1rem"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.loadTopVisible,expression:"loadTopVisible"}],staticClass:"mint-spinner-load"},[e("mt-spinner",{attrs:{type:"fading-circle"}})],1),t._v(" "),e("my-tab-container",{staticClass:"page-tabbar-tab-container",attrs:{swipeable:t.swipeable},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("mt-tab-container-item",{attrs:{id:"tab-container1"}},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],ref:"wrapper1",staticClass:"card-scroll",style:{height:t.scrollHeight+"px"},attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"check"}},[t._l(t.data.tab1.items,function(a,i){return t.data.tab1.items.length>0?e("div",{staticClass:"card"},[e("div",{staticClass:"card-title"},[e("div",{staticClass:"card-info"},[e("router-link",{attrs:{to:t.uid==a.user_id?"/home":"/user/"+a.user_id}},[e("div",{staticClass:"album-block"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.user_avatar,expression:"item.user_avatar"}]})]),t._v(" "),e("div",{staticClass:"info-block"},[e("h3",[t._v(t._s(a.user_nickname))]),t._v(" "),e("span",[t._v("你可能感兴趣")])])])],1),t._v(" "),e("div",{staticClass:"card-button"},[a.is_follow?e("span",{staticClass:"btn-followed",on:{click:function(e){return t.rmFollow(a.follow_id,i)}}},[t._v("已关注")]):e("span",{staticClass:"btn-follow",on:{click:function(e){return t.doFollow(a.user_id,i)}}},[t._v("关注")])])]),t._v(" "),e("div",{ref:"tab1_card_"+i,refInFor:!0,staticClass:"card-wrapper"},[e("ul",{staticClass:"card-lists"},t._l(a.moments,function(a){return e("li",{staticClass:"card-item",staticStyle:{"margin-right":"10px"}},[4==a.moments_type?[e("div",{staticClass:"card-item-album",on:{click:function(i){return t.jumpVideoPlay(a.moments_id)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.moments_image[0],expression:"moments.moments_image[0]"}]})]),t._v(" "),e("div",{staticClass:"card-item-info",on:{click:function(i){return t.jumpVideoPlay(a.moments_id)}}},[e("div",{staticClass:"moments_title"},[t._v(t._s(a.moments_title))])])]:e("router-link",{attrs:{to:"/detail/"+a.moments_id}},[e("div",{staticClass:"card-item-album"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.moments_image[0],expression:"moments.moments_image[0]"}]})]),t._v(" "),e("div",{staticClass:"card-item-info"},[e("div",{staticClass:"moments_title"},[t._v(t._s(a.moments_title))])])])],2)}),0)])]):t._e()}),t._v(" "),0==t.data.tab1.items.length?e("div",{staticClass:"no-record"},[e("div",{staticClass:"no-record-content"},[e("div",{staticClass:"no-record-bg"},[e("img",{staticStyle:{width:"60px"},attrs:{src:i("9XG9")}})]),t._v(" "),e("p",[t._v("暂无相关数据哦~~")])])]):t._e()],2)]),t._v(" "),e("mt-tab-container-item",{attrs:{id:"tab-container2"}},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],ref:"wrapper2",staticClass:"card-scroll",style:{height:t.scrollHeight+"px"},attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"check"}},[t._l(t.data.tab2.items,function(a,i){return t.data.tab2.items.length>0?e("div",{staticClass:"card"},[e("div",{staticClass:"card-title"},[e("div",{staticClass:"card-info",on:{click:function(a){return t.store("item.store_id")}}},[e("div",{staticClass:"album-block"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.store_logo,expression:"item.store_logo"}]})]),t._v(" "),e("div",{staticClass:"info-block"},[e("h3",[t._v(t._s(a.store_name))]),t._v(" "),e("span",[t._v("你可能感兴趣")])])]),t._v(" "),e("div",{staticClass:"card-button"},[a.is_follow?e("span",{staticClass:"btn-followed",on:{click:function(e){return t.rmFollow(a.follow_id,i)}}},[t._v("已关注")]):e("span",{staticClass:"btn-follow",on:{click:function(e){return t.doFollow(a.store_id,i)}}},[t._v("关注")])])]),t._v(" "),e("div",{ref:"tab2_card_"+i,refInFor:!0,staticClass:"card-wrapper"},[e("ul",{staticClass:"card-lists"},t._l(a.products,function(a){return e("li",{staticClass:"card-item",staticStyle:{"margin-right":"10px"},on:{click:function(a){return t.productDetail("product.product_id")}}},[e("div",{staticClass:"card-item-album"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.product_image,expression:"product.product_image"}]})]),t._v(" "),e("div",{staticClass:"card-item-info"},[e("div",{staticClass:"product_name"},[t._v(t._s(a.product_name))]),t._v(" "),e("span",{staticClass:"product_price"},[t._v("￥"+t._s(a.product_unit_price))])])])}),0)])]):t._e()}),t._v(" "),0==t.data.tab2.items.length?e("div",{staticClass:"no-record"},[e("div",{staticClass:"no-record-content"},[e("div",{staticClass:"no-record-bg"},[e("img",{staticStyle:{width:"60px"},attrs:{src:i("9XG9")}})]),t._v(" "),e("p",[t._v("暂无相关数据哦~~")])])]):t._e()],2)]),t._v(" "),e("mt-tab-container-item",{attrs:{id:"tab-container3"}},[e("section",{style:{height:t.scrollHeight+"px"}},[t.data.tab3.items.length>0?e("div",{staticClass:"section-container"},[e("div",{staticClass:"section-wrapper"},[e("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],ref:"wrapper3",staticClass:"section-lists",style:{height:t.scrollHeight+"px"},attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10","infinite-scroll-immediate-check":"check"}},t._l(t.data.tab3.items,function(a,i){return e("li",{staticClass:"section-item"},[e("div",{staticClass:"section-content"},[e("router-link",{attrs:{to:"/tag/"+a.tag_id}},[e("div",{staticClass:"album-block"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.tag_album,expression:"item.tag_album"}]})]),t._v(" "),e("div",{staticClass:"info-block"},[e("h3",[t._v(t._s(a.tag_name))]),t._v(" "),e("span",[t._v("你可能感兴趣")])])])],1),t._v(" "),e("div",{staticClass:"section-btn"},[a.is_follow?e("span",{staticClass:"btn-followed",on:{click:function(e){return t.rmFollow(a.follow_id,i)}}},[t._v("已关注")]):e("span",{staticClass:"btn-follow",on:{click:function(e){return t.doFollow(a.tag_id,i)}}},[t._v("关注")])])])}),0)])]):e("div",{staticClass:"no-record"},[e("div",{staticClass:"no-record-content"},[e("div",{staticClass:"no-record-bg"},[e("img",{staticStyle:{width:"60px"},attrs:{src:i("CYSH")}})]),t._v(" "),e("p",[t._v("您还有没关注的话题哦~~")])])])])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loadBotVisible,expression:"loadBotVisible"}],staticClass:"mint-spinner-bottom"},[e("mt-spinner",{attrs:{type:"fading-circle"}})],1)],1)])},staticRenderFns:[]};var h=i("VU/8")(p,f,!1,function(t){i("c8lo")},"data-v-38481a0d",null);a.default=h.exports},c8lo:function(t,a){}});